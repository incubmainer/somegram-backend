generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/@prisma/payments"
}

datasource db {
  provider = "postgresql"
  url      = env("PAYMENTS_DATABASE_URL")
}

model Order {
  id                    String               @id @default(uuid())
  userId                String
  subscriptionType      String
  price                 Int
  paymentCount          Int
  createdAt             DateTime
  updatedAt             DateTime?
  dateOfPayment         DateTime?
  endDateOfSubscription DateTime?
  paymentSystemOrderId  String?
  autoRenewal           Boolean              @default(false)
  payments              PaymentTransaction[] @relation("OrderPayments")

  @@index([userId])
}

model PaymentTransaction {
  id            String    @id @default(uuid())
  price         Int
  paymentSystem String
  status        String
  createdAt     DateTime
  updatedAt     DateTime?
  orderId       String
  order         Order?    @relation("OrderPayments", fields: [orderId], references: [id])
}
